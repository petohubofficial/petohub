(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[551],{8827:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var i=n(t(64938)),o=t(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm3.3 14.71L11 12.41V7h2v4.59l3.71 3.71-1.42 1.41z"}),"AccessTimeFilled");r.Z=s},41733:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var i=n(t(64938)),o=t(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");r.Z=s},77957:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var i=n(t(64938)),o=t(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");r.Z=s},26797:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var i=n(t(64938)),o=t(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-8 4c0 .55-.45 1-1 1s-1-.45-1-1V8h2v2zm2-6c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2zm4 6c0 .55-.45 1-1 1s-1-.45-1-1V8h2v2z"}),"ShoppingBag");r.Z=s},66242:function(e,r,t){"use strict";t.d(r,{Z:function(){return x}});var n=t(87462),i=t(63366),o=t(67294),s=t(86010),c=t(27192),a=t(40549),u=t(25821),l=t(55113),d=t(28979);function h(e){return(0,d.Z)("MuiCard",e)}(0,t(76087).Z)("MuiCard",["root"]);var f=t(85893);const p=["className","raised"],v=(0,a.ZP)(l.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})((()=>({overflow:"hidden"})));var x=o.forwardRef((function(e,r){const t=(0,u.Z)({props:e,name:"MuiCard"}),{className:o,raised:a=!1}=t,l=(0,i.Z)(t,p),d=(0,n.Z)({},t,{raised:a}),x=(e=>{const{classes:r}=e;return(0,c.Z)({root:["root"]},h,r)})(d);return(0,f.jsx)(v,(0,n.Z)({className:(0,s.Z)(x.root,o),elevation:a?8:void 0,ref:r,ownerState:d},l))}))},54518:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/product",function(){return t(70548)}])},80757:function(e,r,t){"use strict";var n=t(85893),i=(t(3522),t(67294)),o=t(40077);function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function c(){var e,r,t=(e=[""],r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}})));return c=function(){return t},t}var a=(0,t(40549).ZP)(o.Z)(c()),u=(0,i.forwardRef)((function(e,r){return(0,n.jsx)(a,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){s(e,r,t[r])}))}return e}({ref:r},e))}));r.Z=u},33118:function(e,r,t){"use strict";var n=t(85893),i=t(39187),o=t(11163),s=t(67294),c=t(74931);r.Z=function(e){var r=e.children,t=e.roles,a=(0,i.a)(),u=(0,o.useRouter)(),l=(0,s.useState)(!1),d=l[0],h=l[1];return(0,s.useEffect)((function(){if(u.isReady)if(a.isAuthenticated)if(t&&a.isAuthenticated){t.some((function(e){var r;return(null===a||void 0===a||null===(r=a.user)||void 0===r?void 0:r.role)===e}))?h(!0):(c.ZP.error("You do not have the required permissions to access this page"),u.push("/"))}else h(!0);else c.ZP.error("You must be logged in to access this page"),u.push({pathname:"/login",query:{redirect:u.pathname}})}),[u.isReady]),d?(0,n.jsx)(n.Fragment,{children:r}):null}},58207:function(e,r,t){"use strict";t.d(r,{Z:function(){return x}});var n=t(85893),i=t(88169),o=(0,i.Z)((0,n.jsx)("path",{d:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"}),"Dashboard"),s=(0,i.Z)((0,n.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"}),"Assignment"),c=(0,i.Z)((0,n.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3v2zm-3-7V3.5L18.5 9H13z"}),"NoteAdd"),a=t(2734),u=t(36822),l=t(15861),d=t(27948),h=t(66242),f=t(41664),p=t(11163),v=function(e){var r=e.href,t=e.label,i=e.icon,o=(0,p.useRouter)().pathname===r,s=(0,a.Z)(),c=o?s.palette.primary.main:s.palette.action.active,d=o?s.palette.primary.main:"transparent",h=s.palette.primary.main;return(0,n.jsx)(f.default,{href:r,passHref:!0,children:(0,n.jsxs)(u.Z,{display:"flex",sx:{p:1,borderLeft:"2px solid",borderColor:d,cursor:"pointer","&:hover":{borderColor:h,"& svg *":{fill:h},"& .MuiTypography-root":{color:h}},"& svg *":{fill:c}},children:[i,(0,n.jsx)(l.Z,{component:"span",fontWeight:500,color:c,children:t})]})})},x=function(e){var r=e.children;return(0,n.jsx)(d.Z,{children:(0,n.jsxs)(u.Z,{display:"flex",flexDirection:{xs:"column",sm:"row"},sx:{my:2},gap:2,children:[(0,n.jsxs)(h.Z,{sx:{py:2,height:"100%"},children:[(0,n.jsx)(v,{href:"/dashboard",label:"Dashboard",icon:(0,n.jsx)(o,{})}),(0,n.jsx)(v,{href:"/dashboard/product",label:"Products",icon:(0,n.jsx)(s,{})}),(0,n.jsx)(v,{href:"/dashboard/product/new",label:"Add a new product",icon:(0,n.jsx)(c,{})})]}),(0,n.jsx)(h.Z,{sx:{flex:1},children:r})]})})}},70548:function(e,r,t){"use strict";t.r(r);var n=t(34051),i=t.n(n),o=t(85893),s=t(8827),c=t(44510),a=t(60888),u=t(41733),l=t(77957),d=t(26797),h=t(36822),f=t(15861),p=t(27948),v=t(7906),x=t(53184),j=t(68509),Z=t(53252),m=t(295),y=t(18979),g=t(70519),b=t(69661),P=t(50122),S=t(34386),C=t(93946),w=t(78262),O=t(83321),T=t(33118),R=t(58207),A=t(76836),E=t(80757),z=t(41664),D=t(11163),k=t(67294),I=t(74931),L=t(22437),M=t(1674),_=t(34198);function U(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function V(e,r,t,n,i,o,s){try{var c=e[o](s),a=c.value}catch(u){return void t(u)}c.done?r(a):Promise.resolve(a).then(n,i)}function N(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function H(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){N(e,r,t[r])}))}return e}function q(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,o=[],s=!0,c=!1;try{for(t=t.call(e);!(s=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);s=!0);}catch(a){c=!0,i=a}finally{try{s||null==t.return||t.return()}finally{if(c)throw i}}return o}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return U(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return U(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var W=function(){var e,r,t,n,i,s=q(k.useState({limit:10,page:1}),2),c=s[0],a=s[1],u=(0,L.Lk)(c),l=u.data,b=u.isFetching,P=(0,D.useRouter)();return k.useEffect((function(){P.replace({query:H({},c)})}),[c]),0===(null===l||void 0===l||null===(e=l.data)||void 0===e||null===(r=e.results)||void 0===r?void 0:r.length)?(0,o.jsxs)(h.Z,{sx:{p:2},display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",children:[(0,o.jsx)(f.Z,{color:"textSecondary",children:"No products found!"}),(0,o.jsxs)(f.Z,{children:["You can start adding products by clicking"," ",(0,o.jsx)(z.default,{href:"/dashboard/products/new",passHref:!0,children:(0,o.jsx)(f.Z,{component:"span",variant:"link",children:"here"})})]})]}):(0,o.jsx)(p.Z,{children:(0,o.jsxs)(h.Z,{sx:{my:3},children:[(0,o.jsxs)(f.Z,{variant:"h3",children:[(0,o.jsx)(d.Z,{fontSize:"large"})," Products"]}),(0,o.jsx)(E.Z,{children:(0,o.jsxs)(v.Z,{sx:{my:3},children:[(0,o.jsx)(x.Z,{children:(0,o.jsxs)(j.Z,{children:[(0,o.jsx)(Z.Z,{sx:{minWidth:70},children:"S. No"}),(0,o.jsx)(Z.Z,{children:"Image"}),(0,o.jsx)(Z.Z,{sx:{minWidth:140},children:"Product Name"}),(0,o.jsx)(Z.Z,{children:"Stock"}),(0,o.jsx)(Z.Z,{children:"Price"}),(0,o.jsx)(Z.Z,{sx:{minWidth:140},children:"Affiliate Links"}),(0,o.jsx)(Z.Z,{children:"Status"}),(0,o.jsx)(Z.Z,{children:"Actions"})]})}),(0,o.jsx)(m.Z,{children:b?Array(c.limit).fill(null).map((function(e,r){return(0,o.jsxs)(j.Z,{children:[(0,o.jsx)(Z.Z,{children:(0,o.jsx)(y.Z,{variant:"text"})}),(0,o.jsx)(Z.Z,{children:(0,o.jsx)(y.Z,{variant:"circular",width:25,height:25})}),(0,o.jsx)(Z.Z,{children:(0,o.jsx)(y.Z,{variant:"text"})}),(0,o.jsx)(Z.Z,{children:(0,o.jsx)(y.Z,{variant:"text"})}),(0,o.jsx)(Z.Z,{children:(0,o.jsx)(y.Z,{variant:"text"})}),(0,o.jsx)(Z.Z,{children:(0,o.jsx)(y.Z,{variant:"text"})}),(0,o.jsx)(Z.Z,{children:(0,o.jsx)(y.Z,{variant:"circular",width:25,height:25})})]},r)})):null===l||void 0===l||null===(t=l.data)||void 0===t||null===(n=t.results)||void 0===n?void 0:n.map((function(e,r){return(0,o.jsx)(Y,{product:e,index:(c.page-1)*c.limit+r+1},e._id.toString())}))})]})}),(null===l||void 0===l?void 0:l.data)&&l.data.total>10&&(0,o.jsx)(g.Z,{component:"div",count:null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.total,page:c.page-1,rowsPerPage:c.limit,rowsPerPageOptions:[10,20,30],onPageChange:function(e,r){return a(H({},c,{page:r+1}))},onRowsPerPageChange:function(e){a(H({},c,{limit:parseInt(e.target.value,10)}))}})]})})},Y=function(e){var r,t=e.product,n=e.index,d=(0,D.useRouter)(),p=q(k.useState(!1),2),v=p[0],x=p[1],m=q((0,L.dv)(),2),y=m[0],g=m[1].isLoading;return(0,o.jsxs)(j.Z,{hover:!0,children:[(0,o.jsx)(Z.Z,{children:n}),(0,o.jsx)(Z.Z,{children:(0,o.jsx)(b.Z,{src:t.productImages[0]||(0,_.Z)(_.V.PRODUCT),alt:"".concat(t.name," product")})}),(0,o.jsx)(Z.Z,{children:(0,o.jsx)(f.Z,{children:t.name})}),(0,o.jsx)(Z.Z,{children:(0,o.jsx)(f.Z,{children:t.countInStock})}),(0,o.jsx)(Z.Z,{children:(0,o.jsxs)(f.Z,{children:["\u20b9",t.price]})}),(0,o.jsx)(Z.Z,{children:t.affiliateLinks.length>0?t.affiliateLinks.map((function(e){return(0,o.jsxs)(P.Z,{underline:"always",href:e.link,target:"_blank",rel:"noreferrer",color:"text.primary",sx:{display:"block"},children:[e.provider," \u20b9",e.price]},e.provider)})):(0,o.jsx)(f.Z,{children:"N/A"})}),(0,o.jsx)(Z.Z,{children:(0,o.jsx)(f.Z,{children:t.isApproved?(0,o.jsx)(S.Z,{title:"Approved",children:(0,o.jsx)(a.Z,{color:"primary"})}):(0,o.jsx)(S.Z,{title:"Waiting for approval",children:(0,o.jsx)(s.Z,{color:"warning"})})})}),(0,o.jsx)(Z.Z,{children:(0,o.jsxs)(h.Z,{display:"flex",children:[(0,o.jsx)(z.default,{href:"".concat(d.pathname,"/").concat(t._id.toString()),passHref:!0,children:(0,o.jsx)(S.Z,{title:"Edit",children:(0,o.jsx)(C.Z,{children:(0,o.jsx)(l.Z,{})})})}),(0,o.jsx)(w.Z,{fullWidth:!0,open:v,onClose:function(){return x(!1)},children:(0,o.jsxs)(h.Z,{sx:{p:3},children:[(0,o.jsxs)(f.Z,{textAlign:"center",children:["Are you sure you want to delete"," ",(0,o.jsx)(f.Z,{component:"span",fontWeight:600,color:"primary.main",children:t.name}),"?"]}),(0,o.jsxs)(h.Z,{sx:{display:"flex",justifyContent:"flex-end",pt:2},children:[(0,o.jsx)(O.Z,{size:"small",startIcon:(0,o.jsx)(c.Z,{}),color:"success",onClick:function(){return x(!1)},children:"Cancel"}),(0,o.jsx)(O.Z,{variant:"outlined",size:"small",startIcon:(0,o.jsx)(a.Z,{}),color:"error",disabled:g,onClick:(r=i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(t._id.toString()).unwrap();case 3:e.sent.success&&I.ZP.success("Product deleted successfully"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),I.ZP.error((null===e.t0||void 0===e.t0||null===(r=e.t0.data)||void 0===r?void 0:r.error)||"Something went wrong");case 11:return e.prev=11,x(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,7,11,14]])})),function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function s(e){V(o,n,i,s,c,"next",e)}function c(e){V(o,n,i,s,c,"throw",e)}s(void 0)}))}),children:g?"Deleting...":"Delete"})]})]})}),(0,o.jsx)(S.Z,{title:"Delete",children:(0,o.jsx)(C.Z,{onClick:function(){return x(!0)},children:(0,o.jsx)(u.Z,{})})})]})})]})};W.getLayout=function(e){return(0,o.jsx)(T.Z,{roles:[M.u.CLIENT],children:(0,o.jsx)(A.Z,{children:(0,o.jsx)(R.Z,{children:e})})})},r.default=W},22437:function(e,r,t){"use strict";t.d(r,{Lk:function(){return a},g3:function(){return u},Ni:function(){return l},W0:function(){return d},dv:function(){return h}});var n,i=t(89991);function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function s(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.PRODUCTS="client/product"}(n||(n={}));var c=i.h.enhanceEndpoints({addTagTypes:Object.values(n)}).injectEndpoints({endpoints:function(e){return{getClientProducts:e.query({query:function(e){return{url:"client/product",params:e}},providesTags:function(e){return e?s(e.data.results.map((function(e){var r=e._id;return{type:n.PRODUCTS,id:r.toString()}}))).concat([{type:n.PRODUCTS,id:"LIST"}]):[{type:n.PRODUCTS,id:"LIST"}]}}),getClientProduct:e.query({query:function(e){return{url:"client/product",params:{id:e}}},providesTags:function(e,r,t){return[{type:n.PRODUCTS,id:t}]}}),addClientProduct:e.mutation({query:function(e){return{url:"client/product",method:"POST",body:e}},invalidatesTags:[{type:n.PRODUCTS,id:"LIST"}]}),editClientProduct:e.mutation({query:function(e){return{url:"client/product",method:"PUT",params:{id:e.id},body:e.body}},invalidatesTags:function(e){return e?[{type:n.PRODUCTS,id:e.product._id.toString()}]:[{type:n.PRODUCTS,id:"LIST"}]}}),deleteClientProduct:e.mutation({query:function(e){return{url:"client/product",method:"DELETE",params:{id:e}}},invalidatesTags:function(e){return e?[{type:n.PRODUCTS,id:e.product._id.toString()}]:[{type:n.PRODUCTS,id:"LIST"}]}})}}}),a=c.useGetClientProductsQuery,u=c.useGetClientProductQuery,l=c.useAddClientProductMutation,d=c.useEditClientProductMutation,h=c.useDeleteClientProductMutation},34198:function(e,r,t){"use strict";var n;function i(e){switch(e){case n.BRAND:return"/assets/placeholders/brand.png";case n.CATEGORY:return"/assets/placeholders/category.png";case n.PRODUCT:return"/assets/placeholders/product.png";case n.SERVICE:return"/assets/placeholders/service.png";case n.STORE:return"/assets/placeholders/store.png";case n.USER:return"/assets/placeholders/portrait.png";default:return"/assets/placeholders/placeholder.png"}}t.d(r,{V:function(){return n},Z:function(){return i}}),function(e){e.BRAND="brand",e.CATEGORY="category",e.PRODUCT="product",e.SERVICE="service",e.STORE="store",e.USER="user"}(n||(n={}))}},function(e){e.O(0,[206,931,300,849,386,36,836,774,888,179],(function(){return r=54518,e(e.s=r);var r}));var r=e.O();_N_E=r}]);