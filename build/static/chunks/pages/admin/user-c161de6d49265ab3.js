(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518],{41899:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var i=n(t(64938)),o=t(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");r.Z=s},2684:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var i=n(t(64938)),o=t(85893),s=(0,i.default)((0,o.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");r.Z=s},17163:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/user",function(){return t(43357)}])},38246:function(e,r,t){"use strict";var n=t(85893),i=t(41899),o=t(36822),s=t(15861),c=t(34386),u=t(83321),a=(t(67294),t(74931));function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function d(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}r.Z=function(e){var r=e.text,t=e.truncate,f=void 0===t?12:t,p=e.propagate,h=e.fontWeight,x=d(e,["text","truncate","propagate","fontWeight"]);return""===r?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)(o.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){l(e,r,t[r])}))}return e}({display:"flex",justifyContent:"space-between",alignItems:"center",width:f?170:"100%"},x,{children:[(0,n.jsx)(s.Z,{display:"inline",fontSize:"inherit",fontWeight:h,sx:{mr:1},children:!1!==f&&r.length>f?r.substring(0,f)+"...":r}),(0,n.jsx)(c.Z,{title:"Click to copy",children:(0,n.jsx)(u.Z,{sx:{cursor:"pointer",m:0,p:1,minWidth:0},color:"primary",variant:"outlined",onClick:function(e){p||e.stopPropagation(),navigator.clipboard.writeText(r),a.ZP.success("Copied ".concat(r))},children:(0,n.jsx)(i.Z,{fontSize:"small"})})})]}))}},80757:function(e,r,t){"use strict";var n=t(85893),i=(t(3522),t(67294)),o=t(40077);function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function c(){var e,r,t=(e=[""],r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}})));return c=function(){return t},t}var u=(0,t(40549).ZP)(o.Z)(c()),a=(0,i.forwardRef)((function(e,r){return(0,n.jsx)(u,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){s(e,r,t[r])}))}return e}({ref:r},e))}));r.Z=a},33118:function(e,r,t){"use strict";var n=t(85893),i=t(39187),o=t(11163),s=t(67294),c=t(74931);r.Z=function(e){var r=e.children,t=e.roles,u=(0,i.a)(),a=(0,o.useRouter)(),l=(0,s.useState)(!1),d=l[0],f=l[1];return(0,s.useEffect)((function(){if(a.isReady)if(u.isAuthenticated)if(t&&u.isAuthenticated){t.some((function(e){var r;return(null===u||void 0===u||null===(r=u.user)||void 0===r?void 0:r.role)===e}))?f(!0):(c.ZP.error("You do not have the required permissions to access this page"),a.push("/"))}else f(!0);else c.ZP.error("You must be logged in to access this page"),a.push({pathname:"/login",query:{redirect:a.pathname}})}),[a.isReady]),d?(0,n.jsx)(n.Fragment,{children:r}):null}},43357:function(e,r,t){"use strict";t.r(r);var n=t(34051),i=t.n(n),o=t(85893),s=t(44510),c=t(60888),u=t(2684),a=t(27948),l=t(36822),d=t(15861),f=t(7906),p=t(53184),h=t(68509),x=t(53252),j=t(295),v=t(18979),y=t(70519),m=t(69661),Z=t(34386),g=t(78262),b=t(83321),S=t(33118),O=t(38246),P=t(76836),w=t(80757),A=t(11163),T=t(67294),C=t(74931),R=t(83481),E=t(1674),U=t(14479),I=t(34198);function D(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _(e,r,t,n,i,o,s){try{var c=e[o](s),u=c.value}catch(a){return void t(a)}c.done?r(u):Promise.resolve(u).then(n,i)}function V(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function k(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){V(e,r,t[r])}))}return e}function q(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,o=[],s=!0,c=!1;try{for(t=t.call(e);!(s=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);s=!0);}catch(u){c=!0,i=u}finally{try{s||null==t.return||t.return()}finally{if(c)throw i}}return o}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return D(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var z=function(){var e,r,t,n=q(T.useState({limit:10,page:1}),2),i=n[0],s=n[1],c=(0,R.mq)(i),m=c.data,Z=c.isFetching,g=(0,A.useRouter)();return T.useEffect((function(){g.replace({query:k({},i)})}),[i]),(0,o.jsx)(a.Z,{maxWidth:"lg",children:(0,o.jsxs)(l.Z,{sx:{my:3},children:[(0,o.jsxs)(d.Z,{variant:"h3",children:[(0,o.jsx)(u.Z,{fontSize:"large"})," Users Dashboard"]}),(0,o.jsx)(w.Z,{children:(0,o.jsxs)(f.Z,{sx:{my:3},children:[(0,o.jsx)(p.Z,{children:(0,o.jsxs)(h.Z,{children:[(0,o.jsx)(x.Z,{sx:{minWidth:70},children:"S. No"}),(0,o.jsx)(x.Z,{children:"User ID"}),(0,o.jsx)(x.Z,{children:"Avatar"}),(0,o.jsx)(x.Z,{children:"Name"}),(0,o.jsx)(x.Z,{children:"Email"}),(0,o.jsx)(x.Z,{children:"Role"}),(0,o.jsx)(x.Z,{children:"Number"}),(0,o.jsx)(x.Z,{children:"Verified"}),(0,o.jsx)(x.Z,{sx:{minWidth:160},children:"Verified At"}),(0,o.jsx)(x.Z,{sx:{minWidth:160},children:"Created At"}),(0,o.jsx)(x.Z,{sx:{minWidth:160},children:"Updated At"})]})}),(0,o.jsx)(j.Z,{children:Z?Array(10).fill(null).map((function(e,r){return(0,o.jsxs)(h.Z,{children:[(0,o.jsx)(x.Z,{children:(0,o.jsx)(v.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(v.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(v.Z,{variant:"circular",width:25,height:25})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(v.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(v.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(v.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(v.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(v.Z,{variant:"circular",width:25,height:25})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(v.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(v.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(v.Z,{variant:"text"})})]},r)})):null===m||void 0===m||null===(e=m.data)||void 0===e||null===(r=e.results)||void 0===r?void 0:r.map((function(e,r){return(0,o.jsx)(N,{user:e,index:(i.page-1)*i.limit+r+1},e._id.toString())}))})]})}),(null===m||void 0===m?void 0:m.data)&&m.data.total>10&&(0,o.jsx)(y.Z,{component:"div",count:null===m||void 0===m||null===(t=m.data)||void 0===t?void 0:t.total,page:i.page-1,rowsPerPage:i.limit,rowsPerPageOptions:[10,20,30],onPageChange:function(e,r){return s(k({},i,{page:r+1}))},onRowsPerPageChange:function(e){s(k({},i,{limit:parseInt(e.target.value,10)}))}})]})})},N=function(e){var r,t=e.user,n=e.index,u=q(T.useState(!1),2),a=u[0],f=u[1],p=q((0,R.Mh)(),2),j=p[0],v=p[1].isLoading;return(0,o.jsxs)(h.Z,{children:[(0,o.jsx)(x.Z,{children:n}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(O.Z,{text:t._id.toString()})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(m.Z,{src:t.profileImage||(0,I.Z)(I.V.USER),alt:"".concat(t.name," profile")})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(d.Z,{children:t.name})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(O.Z,{text:t.email,truncate:!1})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(d.Z,{children:t.role})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(d.Z,{children:t.number})}),(0,o.jsx)(x.Z,{children:t.isVerified?(0,o.jsx)(Z.Z,{title:"Verified",children:(0,o.jsx)(c.Z,{color:"success"})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.Z,{fullWidth:!0,open:a,onClose:function(){return f(!1)},children:(0,o.jsxs)(l.Z,{sx:{p:3},children:[(0,o.jsxs)(d.Z,{textAlign:"center",children:["Are you sure you want to verify"," ",(0,o.jsx)(d.Z,{component:"span",fontWeight:600,color:"primary.main",children:t.email}),"?"]}),(0,o.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"flex-end",pt:2},children:[(0,o.jsx)(b.Z,{size:"small",startIcon:(0,o.jsx)(s.Z,{}),color:"error",onClick:function(){return f(!1)},children:"Cancel"}),(0,o.jsx)(b.Z,{variant:"outlined",size:"small",startIcon:(0,o.jsx)(c.Z,{}),color:"success",disabled:v,onClick:(r=i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(t._id.toString()).unwrap();case 3:e.sent.success&&C.ZP.success("User verified successfully"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),C.ZP.error((null===e.t0||void 0===e.t0||null===(r=e.t0.data)||void 0===r?void 0:r.error)||"Something went wrong");case 11:return e.prev=11,f(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,7,11,14]])})),function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function s(e){_(o,n,i,s,c,"next",e)}function c(e){_(o,n,i,s,c,"throw",e)}s(void 0)}))}),children:v?"Verifying":"Verify"})]})]})}),(0,o.jsx)(Z.Z,{title:"Click to verify",children:(0,o.jsx)(s.Z,{color:"error",sx:{cursor:"pointer"},onClick:function(){return f(!0)}})})]})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(d.Z,{children:(0,U.Z)(t.verifiedAt)})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(d.Z,{children:(0,U.Z)(t.createdAt)})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(d.Z,{children:(0,U.Z)(t.updatedAt)})})]})};z.getLayout=function(e){return(0,o.jsx)(S.Z,{roles:[E.u.ADMIN,E.u.PRODUCT_ADMIN],children:(0,o.jsx)(P.Z,{children:e})})},r.default=z},83481:function(e,r,t){"use strict";t.d(r,{LQ:function(){return u},Bx:function(){return a},mq:function(){return l},Mh:function(){return d}});var n,i=t(89991);function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function s(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.PRODUCTS="admin/product",e.USERS="admin/user"}(n||(n={}));var c=i.h.enhanceEndpoints({addTagTypes:Object.values(n)}).injectEndpoints({endpoints:function(e){return{getAdminProducts:e.query({query:function(e){return{url:"admin/product",params:e}},providesTags:function(e){return e?s(e.data.results.map((function(e){var r=e._id;return{type:n.PRODUCTS,id:r.toString()}}))).concat([{type:n.PRODUCTS,id:"LIST"}]):[{type:n.PRODUCTS,id:"LIST"}]}}),getAdminProduct:e.query({query:function(e){return{url:"admin/product",params:{id:e}}},providesTags:function(e,r,t){return[{type:n.PRODUCTS,id:t}]}}),approveProduct:e.mutation({query:function(e){return{url:"admin/product/approve",params:{id:e},method:"POST"}},invalidatesTags:function(e){return e?[{type:n.PRODUCTS,id:e.product._id.toString()}]:[{type:n.PRODUCTS,id:"LIST"}]}}),getAdminUsers:e.query({query:function(e){return{url:"admin/user",params:e}},providesTags:function(e){return e?s(e.data.results.map((function(e){var r=e._id;return{type:n.USERS,id:r.toString()}}))).concat([{type:n.USERS,id:"LIST"}]):[{type:n.USERS,id:"LIST"}]}}),getAdminUser:e.query({query:function(e){return{url:"admin/user",params:{id:e}}},providesTags:function(e,r,t){return[{type:n.USERS,id:t}]}}),verifyUser:e.mutation({query:function(e){return{url:"admin/user/verify",params:{id:e},method:"POST"}},invalidatesTags:function(e){return e?[{type:n.USERS,id:e.user._id.toString()}]:[{type:n.USERS,id:"LIST"}]}})}}}),u=c.useGetAdminProductsQuery,a=c.useApproveProductMutation,l=c.useGetAdminUsersQuery,d=c.useVerifyUserMutation},14479:function(e,r,t){"use strict";function n(e){if(!e)return"N/A";var r=new Date(e);return r.toDateString()+" "+r.toLocaleTimeString()}t.d(r,{Z:function(){return n}})},34198:function(e,r,t){"use strict";var n;function i(e){switch(e){case n.BRAND:return"/assets/placeholders/brand.png";case n.CATEGORY:return"/assets/placeholders/category.png";case n.PRODUCT:return"/assets/placeholders/product.png";case n.SERVICE:return"/assets/placeholders/service.png";case n.STORE:return"/assets/placeholders/store.png";case n.USER:return"/assets/placeholders/portrait.png";default:return"/assets/placeholders/placeholder.png"}}t.d(r,{V:function(){return n},Z:function(){return i}}),function(e){e.BRAND="brand",e.CATEGORY="category",e.PRODUCT="product",e.SERVICE="service",e.STORE="store",e.USER="user"}(n||(n={}))}},function(e){e.O(0,[206,931,300,849,386,36,836,774,888,179],(function(){return r=17163,e(e.s=r);var r}));var r=e.O();_N_E=r}]);