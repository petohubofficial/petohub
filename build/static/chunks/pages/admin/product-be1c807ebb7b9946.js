(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[630],{41899:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var i=n(t(64938)),o=t(85893),c=(0,i.default)((0,o.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");r.Z=c},26797:function(e,r,t){"use strict";var n=t(95318);r.Z=void 0;var i=n(t(64938)),o=t(85893),c=(0,i.default)((0,o.jsx)("path",{d:"M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-8 4c0 .55-.45 1-1 1s-1-.45-1-1V8h2v2zm2-6c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2zm4 6c0 .55-.45 1-1 1s-1-.45-1-1V8h2v2z"}),"ShoppingBag");r.Z=c},25322:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/product",function(){return t(51618)}])},38246:function(e,r,t){"use strict";var n=t(85893),i=t(41899),o=t(36822),c=t(15861),s=t(34386),u=t(83321),a=(t(67294),t(74931));function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function d(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}r.Z=function(e){var r=e.text,t=e.truncate,p=void 0===t?12:t,f=e.propagate,h=e.fontWeight,x=d(e,["text","truncate","propagate","fontWeight"]);return""===r?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)(o.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){l(e,r,t[r])}))}return e}({display:"flex",justifyContent:"space-between",alignItems:"center",width:p?170:"100%"},x,{children:[(0,n.jsx)(c.Z,{display:"inline",fontSize:"inherit",fontWeight:h,sx:{mr:1},children:!1!==p&&r.length>p?r.substring(0,p)+"...":r}),(0,n.jsx)(s.Z,{title:"Click to copy",children:(0,n.jsx)(u.Z,{sx:{cursor:"pointer",m:0,p:1,minWidth:0},color:"primary",variant:"outlined",onClick:function(e){f||e.stopPropagation(),navigator.clipboard.writeText(r),a.ZP.success("Copied ".concat(r))},children:(0,n.jsx)(i.Z,{fontSize:"small"})})})]}))}},80757:function(e,r,t){"use strict";var n=t(85893),i=(t(3522),t(67294)),o=t(40077);function c(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(){var e,r,t=(e=[""],r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}})));return s=function(){return t},t}var u=(0,t(40549).ZP)(o.Z)(s()),a=(0,i.forwardRef)((function(e,r){return(0,n.jsx)(u,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){c(e,r,t[r])}))}return e}({ref:r},e))}));r.Z=a},33118:function(e,r,t){"use strict";var n=t(85893),i=t(39187),o=t(11163),c=t(67294),s=t(74931);r.Z=function(e){var r=e.children,t=e.roles,u=(0,i.a)(),a=(0,o.useRouter)(),l=(0,c.useState)(!1),d=l[0],p=l[1];return(0,c.useEffect)((function(){if(a.isReady)if(u.isAuthenticated)if(t&&u.isAuthenticated){t.some((function(e){var r;return(null===u||void 0===u||null===(r=u.user)||void 0===r?void 0:r.role)===e}))?p(!0):(s.ZP.error("You do not have the required permissions to access this page"),a.push("/"))}else p(!0);else s.ZP.error("You must be logged in to access this page"),a.push({pathname:"/login",query:{redirect:a.pathname}})}),[a.isReady]),d?(0,n.jsx)(n.Fragment,{children:r}):null}},51618:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return W}});var n=t(34051),i=t.n(n),o=t(85893),c=t(44510),s=t(60888),u=t(26797),a=t(27948),l=t(36822),d=t(15861),p=t(7906),f=t(53184),h=t(68509),x=t(53252),v=t(295),j=t(18979),y=t(70519),m=t(69661),g=t(34386),Z=t(78262),b=t(83321),S=t(33118),O=t(38246),P=t(76836),w=t(80757),A=t(11163),T=t(67294),C=t(74931),R=t(83481),E=t(1674),U=t(14479),I=t(34198);function D(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _(e,r,t,n,i,o,c){try{var s=e[o](c),u=s.value}catch(a){return void t(a)}s.done?r(u):Promise.resolve(u).then(n,i)}function k(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function q(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){k(e,r,t[r])}))}return e}function z(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,o=[],c=!0,s=!1;try{for(t=t.call(e);!(c=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);c=!0);}catch(u){s=!0,i=u}finally{try{c||null==t.return||t.return()}finally{if(s)throw i}}return o}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return D(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=function(){var e,r,t,n=z(T.useState({limit:10,page:1}),2),i=n[0],c=n[1],s=(0,R.LQ)(i),m=s.data,g=s.isFetching,Z=(0,A.useRouter)();return T.useEffect((function(){Z.replace({query:q({},i)})}),[i]),(0,o.jsx)(a.Z,{maxWidth:"lg",children:(0,o.jsxs)(l.Z,{sx:{my:3},children:[(0,o.jsxs)(d.Z,{variant:"h3",children:[(0,o.jsx)(u.Z,{fontSize:"large"})," Products Dashboard"]}),(0,o.jsx)(w.Z,{children:(0,o.jsxs)(p.Z,{sx:{my:3},children:[(0,o.jsx)(f.Z,{children:(0,o.jsxs)(h.Z,{children:[(0,o.jsx)(x.Z,{sx:{minWidth:70},children:"S. No"}),(0,o.jsx)(x.Z,{children:"Product ID"}),(0,o.jsx)(x.Z,{children:"Image"}),(0,o.jsx)(x.Z,{sx:{minWidth:200},children:"Name"}),(0,o.jsx)(x.Z,{children:"Description"}),(0,o.jsx)(x.Z,{children:"Price"}),(0,o.jsx)(x.Z,{children:"Category"}),(0,o.jsx)(x.Z,{children:"Approved"}),(0,o.jsx)(x.Z,{sx:{minWidth:160},children:"Approved At"}),(0,o.jsx)(x.Z,{sx:{minWidth:160},children:"Created At"}),(0,o.jsx)(x.Z,{sx:{minWidth:160},children:"Updated At"})]})}),(0,o.jsx)(v.Z,{children:g?Array(10).fill(null).map((function(e,r){return(0,o.jsxs)(h.Z,{children:[(0,o.jsx)(x.Z,{children:(0,o.jsx)(j.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(j.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(j.Z,{variant:"circular",width:25,height:25})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(j.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(j.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(j.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(j.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(j.Z,{variant:"circular",width:25,height:25})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(j.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(j.Z,{variant:"text"})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(j.Z,{variant:"text"})})]},r)})):null===m||void 0===m||null===(e=m.data)||void 0===e||null===(r=e.results)||void 0===r?void 0:r.map((function(e,r){return(0,o.jsx)(V,{product:e,index:(i.page-1)*i.limit+r+1},e._id.toString())}))})]})}),(null===m||void 0===m?void 0:m.data)&&m.data.total>10&&(0,o.jsx)(y.Z,{component:"div",count:null===m||void 0===m||null===(t=m.data)||void 0===t?void 0:t.total,page:i.page-1,rowsPerPage:i.limit,rowsPerPageOptions:[10,20,30],onPageChange:function(e,r){return c(q({},i,{page:r+1}))},onRowsPerPageChange:function(e){c(q({},i,{limit:parseInt(e.target.value,10)}))}})]})})},V=function(e){var r,t,n=e.product,u=e.index,a=z(T.useState(!1),2),p=a[0],f=a[1],v=z((0,R.Bx)(),2),j=v[0],y=v[1].isLoading;return(0,o.jsxs)(h.Z,{children:[(0,o.jsx)(x.Z,{children:u}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(O.Z,{text:n._id.toString()})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(m.Z,{src:n.productImages[0]||(0,I.Z)(I.V.PRODUCT),alt:"".concat(n.name," product")})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(d.Z,{children:n.name})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(g.Z,{title:n.description,children:(0,o.jsx)(d.Z,{children:(t=n.description,t.length>20?t.substring(0,20)+"...":t)})})}),(0,o.jsx)(x.Z,{children:(0,o.jsxs)(d.Z,{children:["\u20b9",n.price]})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(d.Z,{children:n.category})}),(0,o.jsx)(x.Z,{children:n.isApproved?(0,o.jsx)(g.Z,{title:"Approved",children:(0,o.jsx)(s.Z,{color:"success"})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Z.Z,{fullWidth:!0,open:p,onClose:function(){return f(!1)},children:(0,o.jsxs)(l.Z,{sx:{p:3},children:[(0,o.jsxs)(d.Z,{textAlign:"center",children:["Are you sure you want to approve"," ",(0,o.jsx)(d.Z,{component:"span",fontWeight:600,color:"primary.main",children:n.name}),"?"]}),(0,o.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"flex-end",pt:2},children:[(0,o.jsx)(b.Z,{size:"small",startIcon:(0,o.jsx)(c.Z,{}),color:"error",onClick:function(){return f(!1)},children:"Cancel"}),(0,o.jsx)(b.Z,{variant:"outlined",size:"small",startIcon:(0,o.jsx)(s.Z,{}),color:"success",disabled:y,onClick:(r=i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(n._id.toString()).unwrap();case 3:e.sent.success&&C.ZP.success("Product approved successfully"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),C.ZP.error((null===e.t0||void 0===e.t0||null===(r=e.t0.data)||void 0===r?void 0:r.error)||"Something went wrong");case 11:return e.prev=11,f(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,7,11,14]])})),function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function c(e){_(o,n,i,c,s,"next",e)}function s(e){_(o,n,i,c,s,"throw",e)}c(void 0)}))}),children:y?"Approving":"Approve"})]})]})}),(0,o.jsx)(g.Z,{title:"Click to approve",children:(0,o.jsx)(c.Z,{color:"error",sx:{cursor:"pointer"},onClick:function(){return f(!0)}})})]})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(d.Z,{children:(0,U.Z)(n.approvedAt)})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(d.Z,{children:(0,U.Z)(n.createdAt)})}),(0,o.jsx)(x.Z,{children:(0,o.jsx)(d.Z,{children:(0,U.Z)(n.updatedAt)})})]})};N.getLayout=function(e){return(0,o.jsx)(S.Z,{roles:[E.u.ADMIN,E.u.PRODUCT_ADMIN],children:(0,o.jsx)(P.Z,{children:e})})};var W=N},83481:function(e,r,t){"use strict";t.d(r,{LQ:function(){return u},Bx:function(){return a},mq:function(){return l},Mh:function(){return d}});var n,i=t(89991);function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function c(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.PRODUCTS="admin/product",e.USERS="admin/user"}(n||(n={}));var s=i.h.enhanceEndpoints({addTagTypes:Object.values(n)}).injectEndpoints({endpoints:function(e){return{getAdminProducts:e.query({query:function(e){return{url:"admin/product",params:e}},providesTags:function(e){return e?c(e.data.results.map((function(e){var r=e._id;return{type:n.PRODUCTS,id:r.toString()}}))).concat([{type:n.PRODUCTS,id:"LIST"}]):[{type:n.PRODUCTS,id:"LIST"}]}}),getAdminProduct:e.query({query:function(e){return{url:"admin/product",params:{id:e}}},providesTags:function(e,r,t){return[{type:n.PRODUCTS,id:t}]}}),approveProduct:e.mutation({query:function(e){return{url:"admin/product/approve",params:{id:e},method:"POST"}},invalidatesTags:function(e){return e?[{type:n.PRODUCTS,id:e.product._id.toString()}]:[{type:n.PRODUCTS,id:"LIST"}]}}),getAdminUsers:e.query({query:function(e){return{url:"admin/user",params:e}},providesTags:function(e){return e?c(e.data.results.map((function(e){var r=e._id;return{type:n.USERS,id:r.toString()}}))).concat([{type:n.USERS,id:"LIST"}]):[{type:n.USERS,id:"LIST"}]}}),getAdminUser:e.query({query:function(e){return{url:"admin/user",params:{id:e}}},providesTags:function(e,r,t){return[{type:n.USERS,id:t}]}}),verifyUser:e.mutation({query:function(e){return{url:"admin/user/verify",params:{id:e},method:"POST"}},invalidatesTags:function(e){return e?[{type:n.USERS,id:e.user._id.toString()}]:[{type:n.USERS,id:"LIST"}]}})}}}),u=s.useGetAdminProductsQuery,a=s.useApproveProductMutation,l=s.useGetAdminUsersQuery,d=s.useVerifyUserMutation},14479:function(e,r,t){"use strict";function n(e){if(!e)return"N/A";var r=new Date(e);return r.toDateString()+" "+r.toLocaleTimeString()}t.d(r,{Z:function(){return n}})},34198:function(e,r,t){"use strict";var n;function i(e){switch(e){case n.BRAND:return"/assets/placeholders/brand.png";case n.CATEGORY:return"/assets/placeholders/category.png";case n.PRODUCT:return"/assets/placeholders/product.png";case n.SERVICE:return"/assets/placeholders/service.png";case n.STORE:return"/assets/placeholders/store.png";case n.USER:return"/assets/placeholders/portrait.png";default:return"/assets/placeholders/placeholder.png"}}t.d(r,{V:function(){return n},Z:function(){return i}}),function(e){e.BRAND="brand",e.CATEGORY="category",e.PRODUCT="product",e.SERVICE="service",e.STORE="store",e.USER="user"}(n||(n={}))}},function(e){e.O(0,[206,931,300,849,386,36,836,774,888,179],(function(){return r=25322,e(e.s=r);var r}));var r=e.O();_N_E=r}]);